{{- $page := . }}
{{- if reflect.IsMap . }}
  {{- with .page }}
    {{- $page = . }}
  {{- else }}
    {{- errorf "The 'page' context is required." }}
  {{- end }}
{{- end }}

{{- if gt $page.Paginator.TotalPages 1 }}
  <ul class="flex justify-center items-center gap-x-4 mt-8 text-gray-300">
    <!-- Previous Arrow -->
    {{- with $page.Paginator.Prev }}
      <li>
        <a href="{{ .URL }}" aria-label="Previous" class="hover:text-white">&lt;</a>
      </li>
    {{- else }}
      <li class="text-gray-500">&lt;</li>
    {{- end }}

    <!-- First Page -->
    <li>
      {{- if eq $page.Paginator.PageNumber 1 }}
        <span aria-current="page" class="px-3 py-1 bg-indigo-500 text-white rounded">1</span>
      {{- else }}
        <a href="{{ $page.Paginator.First.URL }}" class="hover:text-white">1</a>
      {{- end }}
    </li>

    <!-- Ellipses Before Middle Pages -->
    {{- if gt (sub $page.Paginator.PageNumber 2) 1 }}
      <li class="text-gray-500">...</li>
    {{- end }}

    <!-- Middle Pages -->
    {{- $start := math.Max 2 (sub $page.Paginator.PageNumber 1) }}
    {{- $end := math.Min (sub $page.Paginator.TotalPages 1) (add $page.Paginator.PageNumber 1) }}
    {{- range $k := seq $start $end }}
      {{- if eq $page.Paginator.PageNumber $k }}
        <li>
          <span aria-current="page" class="px-3 py-1 bg-indigo-500 text-white rounded">{{ $k }}</span>
        </li>
      {{- else }}
        <li>
          <a href="{{ (index $page.Paginator.Pagers (sub $k 1)).URL }}" class="hover:text-white">{{ $k }}</a>
        </li>
      {{- end }}
    {{- end }}

    <!-- Ellipses After Middle Pages -->
    {{- if lt (add $page.Paginator.PageNumber 2) (sub $page.Paginator.TotalPages 1) }}
      <li class="text-gray-500">...</li>
    {{- end }}

    <!-- Last Page -->
    <li>
      {{- if eq $page.Paginator.PageNumber $page.Paginator.TotalPages }}
        <span aria-current="page" class="px-3 py-1 bg-indigo-500 text-white rounded">{{ $page.Paginator.TotalPages }}</span>
      {{- else }}
        <a href="{{ $page.Paginator.Last.URL }}" class="hover:text-white">{{ $page.Paginator.TotalPages }}</a>
      {{- end }}
    </li>

    <!-- Next Arrow -->
    {{- with $page.Paginator.Next }}
      <li>
        <a href="{{ .URL }}" aria-label="Next" class="hover:text-white">&gt;</a>
      </li>
    {{- else }}
      <li class="text-gray-500">&gt;</li>
    {{- end }}
  </ul>
{{- end }}
